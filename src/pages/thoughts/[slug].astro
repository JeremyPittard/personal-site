---
import { getCollection, render } from "astro:content";
import BlogLayout from "../../layouts/BlogLayout.astro";

export async function getStaticPaths() {
  const thoughts = await getCollection("thoughts");

  return thoughts.map((thought) => {
    return {
      params: {
        slug: thought.data.properties.Name.replaceAll(" ", "-").trim(),
      },
      props: {
        thought,
      },
    };
  });
}

export type Props = Awaited<ReturnType<typeof getStaticPaths>>[number]["props"];
const { thought } = Astro.props;

const { Content } = await render(thought);
---

<BlogLayout>
  {
    thought?.data?.cover?.type === "file" ? (
      <img src={thought.data.cover.file.url} alt="" />
    ) : null
  }
  <h1>
    {thought?.data?.properties?.Name}
  </h1>
  <Content />
</BlogLayout>
<script define:vars={{ thought }}>
  console.log(thought);
</script>
